(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(2),a=t(17),u=t.n(a),o=(t(23),t(8)),s=t(4),i=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("li",{children:[n.name,": ",n.number," ",Object(r.jsx)("button",{onClick:t,children:"Delete"})]})},l=function(e){return Object(r.jsxs)("div",{children:["filter: ",Object(r.jsx)("input",{value:e.filter,onChange:e.handle})]})},b=function(e){return Object(r.jsxs)("form",{onSubmit:e.submit,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.name,onChange:e.handleName}),Object(r.jsx)("br",{}),"number:"," ",Object(r.jsx)("input",{value:e.number,onChange:e.handleNumber})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"notice",children:n})},d=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"error",children:n})},j=function(e){var n=e.persons,t=e.deletePerson;return Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsx)(i,{person:e,deletePerson:function(){return t(e.id)}},e.name)}))})},p=t(3),m=t.n(p),h=t(5),O=t(6),v=t.n(O),x="/api/persons",w={getAll:function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(x);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),post:function(){var e=Object(h.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(x,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),destroy:function(){var e=Object(h.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat(x,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(h.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(x,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},g=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),i=Object(s.a)(u,2),p=i[0],m=i[1],h=Object(c.useState)(""),O=Object(s.a)(h,2),v=O[0],x=O[1],g=Object(c.useState)(""),k=Object(s.a)(g,2),y=k[0],N=k[1],S=Object(c.useState)(null),C=Object(s.a)(S,2),P=C[0],T=C[1],A=Object(c.useState)(null),D=Object(s.a)(A,2),E=D[0],J=D[1];Object(c.useEffect)((function(){w.getAll().then((function(e){return a(e)}))}),[]);var L=t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(f,{message:P}),Object(r.jsx)(d,{message:E}),Object(r.jsx)(l,{filter:y,handle:function(e){N(e.target.value)}}),Object(r.jsx)("h2",{children:"Add person"}),Object(r.jsx)(b,{submit:function(e){if(e.preventDefault(),t.filter((function(e){return e.name===p})).length>0)return!0===window.confirm("".concat(p," is already in the phonebook! Update phone number?"))&&function(){var e=t.find((function(e){return e.name===p})),n=Object(o.a)(Object(o.a)({},e),{},{number:v});w.update(n.id,n).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e}))),T("'".concat(e.name,"' was updated")),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){console.log(e),J("'".concat(n.name,"' has already been removed from the server")),setTimeout((function(){return J(null)}),5e3),a(t.filter((function(e){return e.id!==n.id})))}))}(),m(""),x(""),null;var n={name:p,number:v};w.post(n).then((function(e){a(t.concat(e)),m(""),x(""),T("'".concat(e.name,"' was created")),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){return J(null)}),5e3)}))},name:p,number:v,handleName:function(e){m(e.target.value)},handleNumber:function(e){x(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(j,{persons:L,deletePerson:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&w.destroy(e).then((function(){a(t.filter((function(n){return n.id!==e})))}))}})]})};u.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7a1613ca.chunk.js.map